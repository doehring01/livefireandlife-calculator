<!DOCTYPE html>
<html lang="en">
<head>
  {% include head.html %}
  <title>{% if page.title %}{{ page.title }} â€¢ {% endif %}FIREandLife</title>

  {%- if page.extra_css -%}
    {%- for href in page.extra_css -%}
      <link rel="stylesheet" href="{{ href | relative_url }}">
    {%- endfor -%}
  {%- endif -%}
</head>
<body>
  {% include header.html %}

  <main class="container">
    {{ content }}
  </main>

  {% include footer.html %}

  {%- if page.extra_js -%}
    {%- for src in page.extra_js -%}
      <script src="{{ src | relative_url }}" defer></script>
    {%- endfor -%}
  {%- endif -%}

  <!-- Single, hardened mobile-nav toggle -->
  <script>
  (function(){
    const toggle = document.getElementById('navToggle');
    const menu   = document.getElementById('navMenu');
    if (!toggle || !menu) return;

    function setOpen(open){
      toggle.setAttribute('aria-expanded', String(open));
      toggle.setAttribute('aria-label', open ? 'Close menu' : 'Open menu');
      menu.classList.toggle('is-open', open);
      document.body.classList.toggle('nav-open', open);
    }

    toggle.addEventListener('click', () => {
      const isOpen = toggle.getAttribute('aria-expanded') === 'true';
      setOpen(!isOpen);
    });

    // Close on ESC
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && toggle.getAttribute('aria-expanded') === 'true') {
        setOpen(false);
      }
    });

    // Click-away close (mobile)
    document.addEventListener('click', (e) => {
      if (toggle.getAttribute('aria-expanded') === 'true' &&
          !menu.contains(e.target) && !toggle.contains(e.target)) {
        setOpen(false);
      }
    });
  })();
  </script>
</body>
</html>